{% extends "base_generic.html" %} {% block title %} Contact Us {% endblock %} {%
block content %}
<div class="container">
  <h2>Contact Us</h2>
  <p>Feel free to reach out to us!</p>

  <form id="contact-form" onsubmit="return sendEmail(event);">
    <div class="form-group">
      <label for="name">Name:</label>
      <input type="text" id="name" name="name" class="form-control" required />
    </div>

    <div class="form-group">
      <label for="email">Email:</label>
      <input
        type="email"
        id="email"
        name="email"
        class="form-control"
        required
      />
    </div>

    <div class="form-group">
      <label for="message">Message:</label>
      <textarea
        id="message"
        name="message"
        class="form-control"
        rows="4"
        required
      ></textarea>
    </div>

    <button type="submit" class="btn btn-primary">Send Message</button>
  </form>

  <p id="response-message" style="display: none"></p>
</div>

<!-- EmailJS Integration -->
<script
  type="text/javascript"
  src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"
></script>
<script type="text/javascript">
  (function () {
    emailjs.init({
      publicKey: "I-EySgIfyHnjJUejh",
    });
  })();

  function sendEmail(event) {
    event.preventDefault(); // Prevent the form from submitting normally

    let params = {
      name: document.getElementById("name").value,
      email: document.getElementById("email").value,
      message: document.getElementById("message").value,
    };

    emailjs.send("service_sxfnd9d", "template_1o2cx1c", params).then(
      function (response) {
        document.getElementById("response-message").style.display = "block";
        document.getElementById("response-message").innerText =
          "Email sent successfully!";
        document.getElementById("contact-form").reset();
        console.log("SUCCESS!", response.status, response.text);
      },
      function (error) {
        document.getElementById("response-message").style.display = "block";
        document.getElementById("response-message").innerText =
          "Failed to send email. Please try again.";
        console.log("FAILED...", error);
      }
    );
  }
</script>
{% endblock %}
